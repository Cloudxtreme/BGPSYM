#!/bin/sh


FILES=$@

# changes lines like:
# 1853;  12654;2001:7FB:FE0A::/48; False; False;   05/01/08 00:00:23;  [1853 3356 12779 12654]                             ;  None  ; Update
# 8447;  12654;2001:7FB:FE0A::/48; False; False;   05/01/08 00:00:23;  [8447 3356 12779 12654]                             ;  None  ; Update
# 13237;  12654;   84.205.74.0/24; False; False;   05/01/08 00:00:29;  [13237 1299 12654]                                  ;  1299:20000  ; Update
# 8447;  12654;   84.205.74.0/24; False; False;   05/01/08 00:00:29;  [8447 1299 12654]                                   ;  1120:1 no-export  ; Update
#
# to:
# 13237 12654 4
# 12654 13237 5
# 1853 12654 4
# 12654 1853 5
# 8447 12654 4
# 12654 8447 5




for file in $FILES; do
    cut -d ";" -f 1-2 $file | sort | uniq | sed "s/^ *\(.*\);  \(.*\)$/\1 \2 4\n\2 \1 5/"
done
